process Demo =  {
  
source = PoolSource 
{ 
     # replace 'myfile.root' with the source file you want to use
     untracked vstring fileNames = {"file:/export/data1/rizzi/30064CE9-2874-DC11-A073-000423D9899C.root"} 

}

  service = TFileService { 
    string fileName = "histoqcd.root"
  }

#keep the logging output to a nice level
service = MessageLogger {}







# tracker geometry
#include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

# tracker numbering
#include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

#Refitter (+ access to Trajectory)
#include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
#replace TrackRefitter.TrajectoryInEvent = true

# Track Associators
# include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
# include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"

#include "Configuration/StandardSequences/data/Reconstruction.cff"

#include "Configuration/ReleaseValidation/data/Services.cfi"
#include "Configuration/StandardSequences/data/FakeConditions.cff"

#replace genParticleCandidates.abortOnUnknownPDGCode = false


#include "RecoTracker/DeDx/data/dedxHitsFromRefitter.cfi"
include "RecoTracker/DeDx/data/dedxTruncated40.cfi"
include "RecoTracker/DeDx/data/dedxHarmonic2.cfi"
#  include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"


module dedxHarmonic4 = dedxHarmonic2 from "RecoTracker/DeDx/data/dedxHarmonic2.cfi"
replace dedxHarmonic4.exponent = -4

#replace dedxTruncated40.trackDeDxHits = dedxHitsFromRefitter
replace dedxHarmonic4.trackDeDxHits = dedxHitsFromRefitter

module dedxFit = DeDxBetaWithLikelihood
   {
     InputTag trackDeDxHits = dedxHitsFromRefitter
   }




module demo = HSCPAnalyzer { 
   InputTag dedxSrc = dedxHarmonic4
   bool haveSimTracks = false
   bool useWeights = true
}


  path p = {  dedxHarmonic4, dedxFit, demo} 

}
