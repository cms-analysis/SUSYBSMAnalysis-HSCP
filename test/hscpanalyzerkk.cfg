process Demo =  {
  
source = PoolSource 
{ 
     # replace 'myfile.root' with the source file you want to use
     untracked vstring fileNames = {"file:kkreco_100.root"} 

}

  service = TFileService { 
    string fileName = "histokk.root"
  }

#keep the logging output to a nice level
service = MessageLogger {}







# tracker geometry
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

# tracker numbering
#include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

#Refitter (+ access to Trajectory)
include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
replace TrackRefitter.TrajectoryInEvent = true

# Track Associators
 include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
 include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"

include "Configuration/StandardSequences/data/Reconstruction.cff"

include "Configuration/ReleaseValidation/data/Services.cfi"
include "Configuration/StandardSequences/data/FakeConditions.cff"

replace genParticleCandidates.abortOnUnknownPDGCode = false


include "RecoTracker/DeDx/data/dedxHitsFromRefitter.cfi"
include "RecoTracker/DeDx/data/dedxTruncated40.cfi"
  include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"

  replace dedxTruncated40.trackDeDxHits = dedxHitsFromRefitter

module dedxFit = DeDxBetaWithLikelihood 
   {
     InputTag trackDeDxHits = dedxHitsFromRefitter 
   }

module demo = HSCPAnalyzer { 
}


  path p = {TrackRefitter,dedxHitsFromRefitter, dedxTruncated40, dedxFit, demo} 

}
