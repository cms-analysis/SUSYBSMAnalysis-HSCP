process skimHSCP = {
  source = PoolSource {

   untracked vstring fileNames = {
   'rfio:/castor/cern.ch/user/a/arizzi/150rhaddedx.root'
   }

 }
 untracked PSet maxEvents = {untracked int32 input = 50}
     untracked PSet options = {
        untracked bool wantSummary = true  # default is false
     }

# tracker geometry
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
 
# tracker numbering
#include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

#Refitter (+ access to Trajectory)
include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
replace TrackRefitter.TrajectoryInEvent = true

   # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"

include "Configuration/StandardSequences/data/Reconstruction.cff"
include "Configuration/StandardSequences/data/Simulation.cff"
include "Configuration/StandardSequences/data/MixingNoPileUp.cff"

include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"

include "Configuration/ReleaseValidation/data/Services.cfi"
    include "Configuration/StandardSequences/data/FakeConditions.cff"

replace genParticleCandidates.abortOnUnknownPDGCode = false


include "RecoTracker/DeDx/data/dedxHitsFromRefitter.cfi"
include "RecoTracker/DeDx/data/dedxTruncated40.cfi"
  include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"	

    module out = PoolOutputModule {
        untracked string fileName = '/tmp/arizzi/aaabb.root'
    }

    module hscpFilter = HSCP
    {

    }
   replace dedxTruncated40.trackDeDxHits = dedxHitsFromRefitter
   path p = {TrackRefitter,dedxHitsFromRefitter, dedxTruncated40, hscpFilter }
   endpath outpath = { out }

}



