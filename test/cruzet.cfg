process HSCP =  {

source = PoolSource
{
     # replace 'myfile.root' with the source file you want to use
     untracked vstring fileNames = {"file:BE59E2FA-E072-DD11-8DC9-00304875A9E5.root"}

}

     untracked PSet options = {
        untracked bool wantSummary = true  # default is false
     }



    module out = PoolOutputModule {
    untracked string fileName = 'cruzet-hscp.root'
 }

#keep the logging output to a nice level
service = MessageLogger {}


  service = TFileService {
    string fileName = "histo.root"
  }
# tracker geometry
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"


### Conditions (Global Tag is used here):
include "Configuration/StandardSequences/data/FrontierConditions_GlobalTag.cff"
#replace GlobalTag.connect  ="sqlite_file:/afs/cern.ch/user/m/malgeri/public/globtag/CRUZET3.db"
replace GlobalTag.globaltag = "CRUZET4_V2P::All"
es_prefer GlobalTag = PoolDBESSource {}

### Magnetic fiuld: force mag field to be 0.0 tesla
include "Configuration/StandardSequences/data/MagneticField.cff"
include "Configuration/GlobalRuns/data/ForceZeroTeslaField.cff"
include "Configuration/StandardSequences/data/Geometry.cff"

## reconstruction sequence for Global Run
include "Configuration/StandardSequences/data/ReconstructionCosmics.cff"



module betaFromTOF = BetaFromTOF {
          untracked InputTag  Muons = STAMuonsBarrelOnly
#cosmicMuonsBarrelOnly
#GLBMuonsBarrelOnly
          untracked InputTag  DTsegments  = dt4DSegments
          double PruneCut = 0.1
          int32 HitsMin = 3
          bool debug  = true
          PSet ServiceParameters = {
               untracked vstring Propagators = {
                 "SteppingHelixPropagatorAny",
                 "PropagatorWithMaterial",
                 "PropagatorWithMaterialOpposite"
               }
               bool RPCLayers = true
          }

     }




  path p = {betaFromTOF}
  endpath  e = {out}
}

